<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width">
    <title>连续方程</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        TeX: {
          equationNumbers: { autoNumber: "AMS" },
          extensions: ["color.js"]
        }
      })
    </script>
    <style>
      body {
        background: #F5F5DC;
      }

      .document {
        max-width: 800px;
        margin-left: auto;
        margin-right: auto;
      }

      .title {
        margin-left: auto;
        margin-right: auto;
        font-size: 36px;
        font-weight: bold;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <div class="document">
      \(
        \require{cancel}
        \newcommand{\d}[2]{\frac{d #1}{d #2}}
        \newcommand{\dt}[1]{\d{#1}{t}}
        \newcommand{\pd}[2]{\frac{\partial #1}{\partial #2}}
        \newcommand{\pdt}[1]{\pd{#1}{t}}
        \newcommand{\hdiv}{\nabla_{\pi} \cdot \mathbf{v}}
        \newcommand{\cpocv}{\frac{C_p}{C_V}}
        \newcommand{\cvocp}{\frac{C_V}{C_p}}
      \)

      <p>
        连续方程定义如下
        \[
          \dt{\ln{\rho}} + D_3 = 0
        \]
        其中\(D_3\)是三维散度。
        \[
          \begin{align*}
            D_3 & = {\color{magenta}\nabla_z \cdot \mathbf{v}} + {\color{blue}\pd{w}{z}} \\
              & = {\color{magenta}\nabla_\eta \cdot \mathbf{v} - \cancel{\pd{\mathbf{v}}{\eta} \pd{\eta}{z} \cdot \nabla_\eta z}} + {\color{blue}\pd{\eta}{z} \left[ \left( \dt{} \pd{z}{\eta} \right)_\eta + \cancel{\pd{\mathbf{v}}{\eta} \cdot \nabla_\eta z} \right] + \pd{\dot{\eta}}{\eta}} \\
              & = {\color{magenta}\nabla_\eta \cdot \mathbf{v}} + {\color{blue}\pd{\eta}{z} \left( \dt{} \pd{z}{\eta} \right)_\eta + \pd{\dot{\eta}}{\eta}} \\
              & = \nabla_\eta \cdot \mathbf{v} + \left( \dt{} \ln{\pd{z}{\eta}} \right)_\eta + \pd{\dot{\eta}}{\eta} \\
          \end{align*}
        \]
        代入连续方程
        \[
          \begin{align*}
            \left[ \dt{} \left( \ln{\rho} + \ln{\pd{z}{\eta}} \right) \right]_\eta + \nabla_\eta \cdot \mathbf{v} + \pd{\dot{\eta}}{\eta} & = 0 \\
            \left( \dt{} \ln{\rho \pd{z}{\eta}} \right)_\eta + \nabla_\eta \cdot \mathbf{v} + \pd{\dot{\eta}}{\eta} & = 0 \\
            \left( \dt{} \rho \pd{z}{\eta} \right)_\eta + \rho \pd{z}{\eta} \nabla_\eta \cdot \mathbf{v} + \rho \pd{z}{\eta} \pd{\dot{\eta}}{\eta} & = 0 \\
            \left( \pdt{} \rho \pd{z}{\eta} \right)_\eta + \nabla_\eta \cdot \left( \rho \pd{z}{\eta} \mathbf{v} \right) + \pd{}{\eta} \left( \rho \pd{z}{\eta} \dot{\eta} \right) & = 0 \\
          \end{align*}
        \]
        在静力气压坐标系下，上式简化为
        \[
          \nabla_\pi \cdot \mathbf{v} + \pd{\dot{\pi}}{\pi} = 0
        \]
        在广义垂直坐标系下（中间经过静力气压坐标系），上式为
        \[
          \begin{align*}
            \left( \pdt{} \rho \pd{z}{\pi} \pd{\pi}{\eta} \right)_\eta + \nabla_\eta \cdot \left( \rho \pd{z}{\pi} \pd{\pi}{\eta} \mathbf{v} \right) + \pd{}{\eta} \left( \rho \pd{z}{\pi} \pd{\pi}{\eta} \dot{\eta} \right) & = 0 \\
            \left( \pdt{} \pd{\pi}{\eta} \right)_\eta + \nabla_\eta \cdot \left( \pd{\pi}{\eta} \mathbf{v} \right) + \pd{}{\eta} \left( \pd{\pi}{\eta} \dot{\eta} \right) & = 0 \\
          \end{align*}
        \]
      </p>

    </div>
  </body>
</html>